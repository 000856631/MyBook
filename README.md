# bookScan
ç¬¬äºŒä¸ªå°ç¨‹åº
å®žçŽ°å›¾ä¹¦æ‰«æå½•å…¥çš„åŠŸèƒ½
å½“å‰å®Œæˆå®¢æˆ·ç«¯ä¸ŽæœåŠ¡çš„åŸºæœ¬æ¡†æž¶çš„ç†Ÿæ‚‰ä¸Žæ­å»ºã€‚
äº†è§£KOAæ¡†æž¶ï¼ŒåŒå¿ƒåœ†å‘¨æœŸçš„åŽŸåˆ™ã€‚
ä¸»è¦å†™äº†è¿™ä¸ªå‡½æ•°
const urllib = require('urllib')
async function request( options) {
  let data = null;
  const opts = Object.assign({ dataType: 'json' }, options);
  const url = options.url;
  const request = await urllib.request(url, opts);
  data = request.data;
  return data;
}
module.exports = async ctx => {
  // èŽ·å–ä¸Šä¼ ä¹‹åŽçš„ç»“æžœ
  // å…·ä½“å¯ä»¥æŸ¥çœ‹ï¼š
  const { isbnCode } = ctx.query
  var options = {
    url: 'https://api.douban.com/v2/book/isbn/:' + isbnCode,
    headers: { 'User-Agent': 'request' }
  };

  var response = await request(options); //Yay, HTTP requests with no callbacks! 
  ctx.state.data = response;

}

é€šè¿‡urllibæ¥å¤–æŽ¥APIï¼Œä¹‹å‰å°è¯•äº†https,httpï¼Œè¿˜æœ‰KOA-request é‡åˆ°äº†ä¸å°‘æŒ«æŠ˜
å¯¹awaitå’Œasyncçš„jsæ–°å†™æ³•è¦å¥½å¥½ç†Ÿæ‚‰ç†Ÿæ‚‰ï¼Œè²Œä¼¼é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥æ¶ˆé™¤éš¾çœ‹çš„å›žè°ƒã€‚
ä»”ç»†æƒ³æƒ³è¿˜éƒ½æ˜¯åŒå¿ƒåœ†çš„æ€è·¯ã€‚
è±†ç“£çš„APIè¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œè®°ä½åªæ”¯æŒhttps.
å¯¹äºŽctxçš„ç”¨æ³•è¦å¥½å¥½æ•´ç†ä¸‹ï¼ŒèŽ·å–ä¸Šä¸‹æ–‡çš„å…³é”®å‚æ•°ã€‚ 
æœ¬æ¥æˆ‘å°±å¯¹nodeçš„requestå’Œresponseå°±ä¸æ˜¯å¾ˆç†Ÿï¼Œåœ¨è¿™å—ä¹Ÿè¸©å‘ä¸å°‘ã€‚
Request aliases

ä»¥ä¸‹è®¿é—®å™¨å’Œåˆ«åä¸Ž Request ç­‰ä»·ï¼š

    ctx.header
    ctx.method
    ctx.method=
    ctx.url
    ctx.url=
    ctx.originalUrl
    ctx.path
    ctx.path=
    ctx.query
    ctx.query=
    ctx.querystring
    ctx.querystring=
    ctx.host
    ctx.hostname
    ctx.fresh
    ctx.stale
    ctx.socket
    ctx.protocol
    ctx.secure
    ctx.ip
    ctx.ips
    ctx.subdomains
    ctx.is()
    ctx.accepts()
    ctx.acceptsEncodings()
    ctx.acceptsCharsets()
    ctx.acceptsLanguages()
    ctx.get()

Response aliases

ä»¥ä¸‹è®¿é—®å™¨å’Œåˆ«åä¸Ž Response ç­‰ä»·ï¼š

    ctx.body
    ctx.body=
    ctx.status
    ctx.status=
    ctx.length=
    ctx.length
    ctx.type=
    ctx.type
    ctx.headerSent
    ctx.redirect()
    ctx.attachment()
    ctx.set()
    ctx.remove()
    ctx.lastModified=
    ctx.etag=

Anywayï¼ŒI have done itã€‚
æœåŠ¡ç«¯çš„å†…å®¹è¿˜éœ€è¦è¡¥å¾ˆå¤šå‘ï¼Œä¹‹å‰ç¬¬ä¸€ä¸ªå°ç¨‹åºåªæ˜¯é‡‡ç”¨çŽ°æˆçš„æ¨¡ç‰ˆæ¥å®žçŽ°çš„ã€‚
ä¸‹ä¸€æ­¥ï¼Œå¯¹äºŽæ‰«ç èŽ·å–çš„å›¾ä¹¦ä¿¡æ¯è¿›è¡Œå¡«å……æ¸²æŸ“ã€‚
è®°å½•æˆ‘è¿™ä¸ªå®¢æˆ·çš„å›¾ä¹¦ä¿¡æ¯ã€‚è¿™é‡Œè¦æ¶‰åŠæ•°æ®åº“äº†ã€‚
ä¸¤å¼ è¡¨ï¼Œä¸€å¼ æ˜¯æˆ‘çš„å›¾ä¹¦åˆ—è¡¨ä¿¡æ¯ï¼Œç”¨openIDåšä¸»é”®å§ å…¶ä½™å­—æ®µæœ‰ISBN,å›¾ä¹¦å›¾ç‰‡urlã€‚
ç¬¬äºŒå¼ è¡¨æ˜¯å›¾ä¹¦è¡¨ï¼Œé€šè¿‡ISBNå·æœç´¢å‡ºå›¾ä¹¦çš„ä¿¡æ¯ï¼Œå°±ç”¨ISBNåšä¸»é”®å§ï¼Œå…¶ä½™ä¿¡æ¯å‚è€ƒjsonæ¥è®¾è®¡ã€‚
åˆæ˜¯ä¸€ä¸ªå‘ã€‚æ…¢æ…¢å¡«å§
æˆ–è€…çœ‹çœ‹å°ç¨‹åºæœ¬åœ°ç¼“å­˜æ¥å®žçŽ°ã€‚è²Œä¼¼ä¹Ÿå¯ä»¥ã€‚å“ˆå“ˆã€‚
åŽç»­å¯ä»¥åšåˆ†äº«æˆ‘çš„å›¾ä¹¦æ¸…å•ã€‚
åˆ†äº«å›¾ä¹¦æ¸…å•åŠŸèƒ½ï¼š
1ã€è°ƒæ•´ä¹¦æž¶UIï¼Œæ·»åŠ å¤´åƒå’Œæ˜µç§°çš„å±•çŽ°ï¼Œæ·»åŠ åˆ†äº«æŒ‰é’®ã€ä»¥åŠé¦–é¡µæŒ‰é’®ã€‚
2ã€åŠ å…¥æ•°æ®åº“åŠŸèƒ½ï¼Œå­˜å‚¨è¯¥ç”¨æˆ·çš„æ˜µç§°ã€å¤´åƒã€å’Œä¹¦æž¶ä¿¡æ¯ã€‚
// åˆå§‹åŒ– SDK
// å°†åŸºç¡€é…ç½®å’Œ sdk.config åˆå¹¶ä¼ å…¥ SDK å¹¶å¯¼å‡ºåˆå§‹åŒ–å®Œæˆçš„ SDK
è¿™ä¸€æ­¥å¾ˆå…³é”®ï¼Œé“¾æŽ¥äº†æ•°æ®åº“çš„åŠ¨ä½œã€‚æ‰€ä»¥å¯ä»¥ç›´æŽ¥å¼•ç”¨äº†ã€‚
const { mysql } = qcloud
mysql('testBook').select('*').where({ nickName: Samel }) // => { id:1, name: 'leo', age: 20 }
å¯ä»¥è¿è¡Œè¯•è¯•ã€‚çœ‹èƒ½ä¸èƒ½è¿”å›žè¿™ä¸ªæ•°æ®å›žæ¥ã€‚
å¯ä»¥çš„è¯å°±åº”è¯¥è®¾è®¡è¡¨ç»“æž„äº†ã€‚
å­˜å‚¨ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯è¿™å—ï¼Œè¿˜æ²¡æœ‰è°ƒè¯•ã€‚å¯ä»¥å…ˆç¼“ç¼“å—ï¼Ÿ
æŸ¥è¯¢åŠ¨ä½œ

3ã€è°ƒç”¨å¾®ä¿¡å°ç¨‹åºçš„åˆ†äº«åŠŸèƒ½ã€‚

ç›ˆåˆ©ç‚¹ï¼šæ”¯ä»˜çš„ç”¨æˆ·å¯ä»¥å®žçŽ°å¯¼å‡ºåˆ°Excelã€‚
å·²ç»é€šè¿‡æœ¬åœ°ç¼“å­˜ ç®€å•è®°å½•äº†ä¸ªäººå½•å…¥çš„å›¾ä¹¦ä¿¡æ¯äº†ã€‚
æ— éœ€èŽ·å–ä¸ªäººç™»å½•ä¿¡æ¯ï¼Œè¿˜æ˜¯æ¯”è¾ƒè‰¯å¿ƒçš„ã€‚
ä¸‹ä¸€æ­¥å°±éœ€è¦æžæžæ•°æ®åº“ã€‚èµ·ç å¾—èŽ·å–ç”¨æˆ·çš„openIDã€‚
å’Œè¡¨è®°å½•å…³è”ã€‚
å¯¹äºŽå½•å…¥çš„å›¾ä¹¦ã€‚ç‚¹å¼€å¯ä»¥å±•çŽ°æ›´ä¸°å¯Œçš„å†…å®¹ã€‚ç®€ä»‹ã€ä½œè€…ã€æ‘˜è¦ä¹‹ç±»ã€‚
å¹¶ä¸”å¯ä»¥å½•å…¥ç”¨æˆ·çš„ä¸€äº›å¤‡æ³¨ä¿¡æ¯ã€‚
å½“ç„¶ï¼Œä¹Ÿèƒ½è®©ç”¨æˆ·æœ‰è‡ªå·±çš„è¯»ä¹¦è®¡åˆ’ä¹Ÿæ˜¯ä¸é”™çš„ã€‚

è¿™éƒ¨åˆ†å®Œå–„åŽï¼Œå°±å¯ä»¥åšåˆ†äº«å›¾ä¹¦æ¸…å•ï¼Œä»¥åŠé™Œç”Ÿäººå€Ÿä¹¦ç¤¾äº¤çš„å¥—è·¯äº†ã€‚
ä¸€æ­¥ä¸€ä¸ªè„šå°ï¼Œæ…¢æ…¢æ¥å§ã€‚
å‰é¢çš„åˆ†äº«ä»¥åŠæ•°æ®åº“æ­å»ºå·²ç»å®Œæˆã€‚
æŽ¥ä¸‹æ¥åˆ†äº«åˆ—è¡¨é¡µåŠ å…¥æœ¬äººç™»å½•åŽçš„å¤´åƒå§ã€‚
è¿™å¿«åº”è¯¥èƒ½å¾ˆå¿«å®žçŽ°
çŽ°åœ¨åŸºæœ¬æµç¨‹ æ’å…¥æ•°æ®åº“ ä»¥åŠè¯»å–è¯¦æƒ…é¡µè¿™å—è¿˜æœ‰äº›å°bug
1ã€å…ˆæŠŠåŸºæœ¬æµç¨‹å¼„é€šã€‚å…¨éƒ¨æ”¹ä¸ºåœ¨çº¿æ¨¡å¼ã€‚
2ã€ç„¶åŽæŠŠåˆ†äº«å¼„é€šã€‚æäº¤ä¸€æ¬¡githubã€‚
3ã€å°±å†æ¬¡æäº¤ä¸€æ¬¡é€å®¡å§ã€‚

éƒ½ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ã€‚
åŽç»­åŠ å•¥åŠŸèƒ½å‘¢ï¼Ÿ
åŠ å…¥åˆ é™¤åŠŸèƒ½å§
æŠŠä¸ªäººç®€ä»‹åŠ è¿›åŽ»å§ï¼Œä»¥åŠç”¨æˆ·ç•™è¨€åé¦ˆåŠŸèƒ½
åŽç»­åŠ å…¥é™„è¿‘çš„ä¹¦è¿™ä¸ªåŠŸèƒ½å§ã€‚

å†™åˆ°æ’å…¥ä¹¦ç±è¯¦æƒ…è¿™é‡Œï¼Œç„¶åŽä¹¦ç±è¯¦æƒ…å°±å†å°è£…ä¸€ä¸ªæŽ¥å£æ¥æŸ¥ï¼Œä¸å†ä»Žç¼“å­˜å–äº†ã€‚
å»ºè®®åŽç»­åŠ å…¥ä¸€ä¸ªç§å¯†æ‰«æçš„ä¹¦æž¶ï¼Œä¸ä¼šä¸Šä¼ 
åº”è¯¥æ˜¯è¿™æ ·ï¼Œç”¨æˆ·æ‰«æçš„å’Œè‡ªå·±çœ‹çš„æ—¶å€™éƒ½æ˜¯æœ¬æ¬¡å­˜å‚¨ï¼Œ
å°±æ˜¯è½¬å‘å‡ºåŽ»çš„æ—¶å€™æ‰åŽ»æœåŠ¡å™¨å–ï¼Œä½†æ˜¯è¿™æ ·ä¸å¥½ï¼Œè¿˜è¦åŒºåˆ†æ˜¯æœ¬åœ°è¿˜æ˜¯åœ¨çº¿
ä¸å¦‚ç»Ÿä¸€æ”¹ä¸ºåœ¨çº¿æ¨¡å¼å¥½äº†ã€‚
è¿™ä¹Ÿæ˜¯ä¸€å¼€å§‹çš„è®¾è®¡æ²¡æƒ³å¥½çš„åŽŸå› ã€‚

å…ˆåšæŠŠå°ç¨‹åºæ·»åŠ åˆ°æ¡Œé¢
ç„¶åŽæ˜¯åŠ å…¥å®šæœŸæé†’æŽ¨é€çœ‹ä¹¦çš„é€šçŸ¥ã€‚
å®žçŽ°æ€è·¯ï¼Œåœ¨å…·ä½“çš„ä¹¦ç±ä¸‹é¢å¯ä»¥è®¾ç½®æé†’ä¸‹æ¬¡çœ‹ä¹¦æ—¶é—´ã€‚
è®¾ç½®é™å®šä¸ºä¸ƒå¤©å†…ã€‚
æ¯è®¾ç½®ä¸€æ¬¡å¯ä»¥èŽ·å¾—ä¸€é¢—æ˜Ÿæ˜Ÿï¼Œç§¯æ»¡10é¢—è¡Œ æˆ‘å°±æŠŠè¿™æœ¬ä¹¦å®šä¹‰ä¸ºæˆ‘å·²ç»ç†Ÿè¯»çš„ä¹¦ç±ã€‚
åˆ†äº«çš„æ—¶å€™å¯ä»¥æ ‡è¯†å‡ºæ¥ã€‚
å¸ƒå±€çš„ä¼˜åŒ–å»ºè®®ï¼šåˆ†äº«æ”¹ä¸ºä¸€ä¸ªæ‚¬æµ®åœ¨å³è¾¹ä¸­é—´åŒºåŸŸçš„é€æ˜Žæ¨¡ç³Šè‰²å—
åŠ å…¥å„ç±»æŒ‰é’®åŠŸèƒ½ã€‚
ä¾‹å¦‚åˆ†äº«ï¼Œä»¥åŠå¡«å†™æé†’è®¡åˆ’ï¼Œå¯ä»¥è®¾ç½®æœªæ¥ä¸ƒå¤©å†…çš„è¯»ä¹¦æé†’è®¡åˆ’
æé†’è®¡åˆ’è¿™ä¸ªå¯ä»¥è¿™ä¹ˆçŽ©ï¼Œä¸€ç‚¹å‡»ç›´æŽ¥å°±æ˜¯å¼¹æ¡†ï¼Œæ˜¯å¦åœ¨ä»Šæ™š8:30æé†’æˆ‘é˜…è¯»æ­¤ä¹¦ï¼Ÿ
æ˜¯çš„è¯å°±ç›´æŽ¥å‘æŽ¨é€å’¯ã€‚
ç„¶åŽè¯•è¯•æŽ¨é€çš„çŽ©æ³•
åŽç»­åŠ å…¥é™„è¿‘å›¾ä¹¦é¦†çš„åŠŸèƒ½å§ã€‚
ä¸€ä¸ªå›¾ç‰‡æŒ‰é’®ï¼Œå±…ç„¶å¡äº†æˆ‘å¾ˆä¹…
é€šè¿‡ç›–äº†ä¸€å±‚éšè—çš„æŒ‰é’®ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒåŽç»­çœ‹çœ‹æœ‰æ²¡æœ‰æ›´å¥½çš„åŠžæ³•ã€‚

è²Œä¼¼å¾®ä¿¡tokenè¿™é‡Œï¼Œå·²ç»é¢„å…ˆå®šä¹‰å¥½äº†ä¸€ä¸ªå˜é‡ï¼Œä½†æ˜¯ðŸˆ¶ï¸æ²¡æœ‰åŽ»ä½¿ç”¨ã€‚
åŽç»­çœ‹çœ‹èƒ½ä¸èƒ½æ‰¾å¾®ä¿¡æ”¯æŒçš„äººé—®ä¸‹äº†

https://www.jianshu.com/p/17138713d601
è¿™é‡Œèƒ½æŸ¥çœ‹ä¼šè¯æœåŠ¡å™¨é…ç½®çš„secretå’ŒappID

å…ˆç”¨é‡Žè›®å†™æ³•å§ï¼ŒæŠŠé€šçŸ¥æžæŽ‚å…ˆã€‚
å…³äºŽnodejs urllibçš„ç”¨æ³•ï¼š
https://www.npmjs.com/package/urllib
è¿™ä¸ªé“¾æŽ¥æžæŽ‚getå’Œpostçš„è°ƒç”¨åŒºåˆ«ã€‚

å½“å‰æƒ…å†µï¼Œé€šçŸ¥èƒ½è°ƒèµ·äº†ï¼Œä½†æ˜¯éœ€è¦æœåŠ¡å™¨æ‰§è¡Œä¸€ä¸ªå®šæ—¶æ‰¹é‡ã€‚
è°ƒé‚£ä¸ªå…ˆæš‚æ—¶æŠŠè¦å‘æ¶ˆæ¯çš„ä¼ å…¥åˆ—è¡¨ï¼Œä»¥åŠåŠ å…¥ä¸€ä¸ªçŠ¶æ€ä¸ºæœªå‘é€ã€‚
ç”¨æˆ·ç‚¹å‡»è¿™ä¸ªæŒ‰é’®çš„æ—¶å€™æ’å…¥ä¸€å¼ æ¶ˆæ¯é€šçŸ¥è¡¨ã€‚

æ¯å¤©æ™šä¸Š8:30å†åŽ»å®šæ—¶æŸ¥è¯¢è¿™å¼ è¡¨ï¼Œç„¶åŽè°ƒå¾®ä¿¡çš„é€šçŸ¥æŽ¥å£ã€‚
ç„¶åŽæ›´æ–°è¿™ä¸ªè¡¨çš„çŠ¶æ€ã€‚

å…ˆè¯•è¯•å®šæ—¶æ‰“å°æ—¥å¿—çš„ä»£ç å§ã€‚æˆ‘ä»¬é€šè¿‡çœ‹æœåŠ¡å™¨åŽå°æ—¥å¿—
https://segmentfault.com/a/1190000006206193
è¿™ç‰‡ä¸œè¥¿ä»‹ç»äº†laterè¿™ä¸ªåº“

è¡¨è®¾è®¡æ¼äº†ä¹¦åï¼Œè¿˜æœ‰ä¹¦çš„è¿›åº¦çŠ¶æ€ã€‚è¿›åº¦çŠ¶æ€é€šè¿‡ç¼“å­˜æ¥å®žçŽ°ï¼Œè®°å½•æ˜Ÿæ˜Ÿä½¿ç”¨ã€‚
å…ˆæŠŠåŸºæœ¬æµç¨‹æžé€šï¼Œå†è¡¥å……ä¹¦åçš„è®¾è®¡ã€‚
è¡¥äº†ä¹¦åäº†
è¿˜æœ‰updateçš„æµç¨‹å¿˜è®°å†™äº†

è®°å¾—æäº¤git,æ™šä¸Šè§£å†³ä¸‰ä¸ªé—®é¢˜ã€‚å·¥ä½œçš„æ—¶å€™å†™é¡¹ç›®
å“ˆå“ˆï¼Œå°±å·®æœ€åŽä¸€æ­¥updateè¡¨çš„çŠ¶æ€äº†

https://juejin.im/post/59cb487ef265da065075409f 
constÂ {Â mysqlÂ }Â =Â require('../qcloud')
constÂ uuidÂ =Â require('node-uuid')
module.exportsÂ =Â asyncÂ ctxÂ =>Â 
{Â Â 
varÂ idÂ =Â uuid.v1()Â Â //Â å¢žÂ 
Â varÂ bookÂ =Â {Â Â Â Â 
id:Â id,Â Â Â Â 
name:Â "å†°ä¸Žç«ä¹‹æ­Œ",Â Â 
Â Â price:Â 88Â Â 
}Â Â 
   awaitÂ mysql("Book").insert(book)Â Â 
 //Â æŸ¥Â Â varÂ resÂ =Â awaitÂ mysql("Book").where({Â idÂ }).first()Â 
Â //Â æ”¹Â Â awaitÂ mysql("Book").update({Â price:Â 66Â }).where({Â idÂ })Â 
Â //Â åˆ Â Â awaitÂ mysql("Book").del().where({Â idÂ })Â 
Â ctx.state.dataÂ =Â "OK"}

æ•°æ®åº“æ“ä½œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå‰é¢éœ€è¦åŠ å…¥awaitæ‰èƒ½è°ƒèµ·ä½¿ç”¨ã€‚
updateçš„é—®é¢˜ä¹Ÿå·²ç»è§£å†³ã€‚

thisæ€»æ˜¯æŒ‡å‘è¯æ³•ä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯å¤–å±‚è°ƒç”¨è€…obj
æ‰€ä»¥åœ¨  formSubmit: function (e) {
    var self = this;æŠŠthisæå‰ä¹‹åŽå°±èƒ½æ­£ç¡®å¼•ç”¨ self.data.movie
ç®­å¤´å‡½æ•°çš„ç”¨æ³•ï¼šhttps://www.cnblogs.com/hailun/p/6279029.html


function (x) {
    return x * x;
}

module.exports = async ctx => {

}
ç­‰ä»·äºŽ
async function noticeUser()
{

}
module.exports = noticeUser;